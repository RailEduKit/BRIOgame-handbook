%!TEX TS-program = pdflatexmk
%!TEX root = ../handbook.tex

% Copyright 2019 Martin Scheidt (Attribution 4.0 International, CC-BY 4.0)
% You are free to copy and redistribute the material in any medium or format. You are free to remix, transform, and build upon the material for any purpose, even commercially. You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits. No warranties are given.

\part{\IfLanguage{english}{Challenges}\IfLanguage{ngerman}{Aufgaben}}

\chapter{\IfLanguage{english}{First Stage}\IfLanguage{ngerman}{Erste Stufe}}
  \section{\IfLanguage{english}{Introduction to Driving Dynamics}\IfLanguage{ngerman}{Einführung Fahrdynamik}}
    \setup
      \IfLanguage{english}{TODO}
      \IfLanguage{ngerman}{Auf einem Gleis soll ein beliebiger Zug verkehren, mit:}
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
          % \item A single train on field $0$ towards $39$.
        }
        \IfLanguage{ngerman}{
          \item Infrastruktur wie unten abgebildet
          \item der Zug steht auf Feld $0$ in Richtung $39$
        }
      \end{itemize}
      \tikzfigure{challenge1_setup.tikz}
    \task
      \IfLanguage{english}{The train stands still and has its shift lever at \SI{0}{\kilo\metre\per\hour}.}
      \IfLanguage{ngerman}{Der Zug steht und hat seinen Schalthebel auf \SI{0}{\kilo\metre\per\hour}.}
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item If the train accelerates as much as possible, which field can it get to in \emph{nine} laps?
          \item How many laps are minimally needed, if the train stops at every station?
          \item The train  passes through the first station and has its shift lever on maximum speed. How many laps are needed if the train shall leave the track completely without stopping?
        }
        \IfLanguage{ngerman}{
          \item Wenn der Zug maximal beschleunigt, bis zu welchen Feld gelangt er in \emph{neun} Runden?
          \item Wie viele Runden benötigt man minimal, wenn der Zug an jedem Bahnsteig halten soll?
          \item Der Zug fährt gerade am Bahnsteig A vorbei und hat seinen Schalthebel auf der maximalen Geschwindigkeit. Wie viele Runden benötigt man, wenn der Zug ohne Halt die Strecke vollständig verlassen soll?
        }
      \end{enumerate}
      \IfLanguage{english}{Note the solution steps in a protocol!}
      \IfLanguage{ngerman}{Notiere die Lösungschritte in einem Protokoll!}
      
  \newpage

  \section{\IfLanguage{english}{Sight and Braking Distance}\IfLanguage{ngerman}{Sicht- und Bremsweg}}
    \setup
      \IfLanguage{english}{Unknown line with different visibility conditions:}
      \IfLanguage{ngerman}{Unbekannte Strecke mit verschiedenen Sichtverhältnissen:}
      \\[0.5cm]
      \input{\ROOT/tables/visibility_conditions.tex}
    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item What is the maximum speed for the train with very good visibility in order to stop in front of an obstacle in time?
          \item How many laps does it take to get safely to a station $12$ fields away under normal visibility conditions?
          \item How many fields far would you have to be able to see in order to drive \SI{160}{\kilo\metre\per\hour}?
        }
        \IfLanguage{ngerman}{
          \item Wie schnell kann der Zug bei sehr gutem Sichtverhältnis maximal Fahren um vor einem Hindernis rechtzeitig anzuhalten?
          \item Wie viele Runden benötigt man minimal, um gefahrlos bei normalen Sichtverhältnissen in einem $12$ Felder entfernten Bahnhof zu gelangen?
          \item Wie viele Felder weit müsste man sehen können, um \SI{160}{\kilo\metre\per\hour} fahren zu können?
        }
      \end{enumerate}

\chapter{\IfLanguage{english}{Second Stage}\IfLanguage{ngerman}{Zweite Stufe}}
  \section{\IfLanguage{english}{Block Segmentation}\IfLanguage{ngerman}{Blockteilung}}\label{sec:Blockteilung}
    \setup
      \IfLanguage{english}{TODO}
      \IfLanguage{ngerman}{Auf einer Strecke sollen mit Blocklogik verschiedene Züge verkehren können! Dafür wird benötigt:}
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
        }
        \IfLanguage{ngerman}{
          \item eine beliebig lange Strecke
          \item 3 vollständige Blöcke mit Vorsignal, Hauptsignal und Signalzugschlussstelle.
          \item mindestens ein Zug
        }
      \end{itemize}
    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item\todo{}
          \item Place the distant and main signals so that \SI{160}{\kilo\metre\per\hour} can be driven and bad visibility does not lead to impairment!
          \item How many laps is a block occupied with a train run minimally (complete blocking time)?
        }
        \IfLanguage{ngerman}{
          \item Platziere die Vorsignale, Hauptsignale und Signalzugschlussstelle so, dass \SI{160}{\kilo\metre\per\hour} gefahren werden kann und schlechte Sichtverhältnisse nicht zur Beeinträchtigung führt!
          \item Wie viele Runden dauert die vollständige Sperrzeit für die Fahrt durch einen Block (Sichtzeit, Annährungszeit, Fahrzeit im Block, Räumzeit)?
        }
      \end{enumerate}

  \section{\IfLanguage{english}{Traffic Flow}\IfLanguage{ngerman}{Verkehrsfluss}}
    \setup
      \IfLanguage{english}{TODO}
      \IfLanguage{ngerman}{Auf einer Strecke sollen mit Blocklogik verschiedene Züge verkehren! Dafür wird benötigt:}
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
          \item Two different trains with different train dynamics.
          \item A track with at least 3 complete blocks.
        }
        \IfLanguage{ngerman}{
          \item zwei Züge mit verschiedener Fahrdynamik
          \item die Strecke aus Abschnitt \ref{sec:Blockteilung}
        }
      \end{itemize}
      \IfLanguage{english}{Trains enter the system at the beginning of the track; trains exit the system at the end of the track. The infrastructure before and after the line is neglected.}
      \IfLanguage{ngerman}{Am Anfang der Strecke brechen Züge ein; am Ende der Strecke brechen Züge aus. Die Infrastruktur vor und nach der Strecke wird vernachlässigt.}
    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item How many laps are needed from the first train breaking in to the second train leaving if both trains are to run unimpeded and the \emph{fast} runs in front of the \emph{slow} train?
          \item How many laps are needed from the first train breaking in to the second train leaving if both trains are to run unimpeded and the \emph{slow} runs in front of the \emph{fast} train?
        }
        \IfLanguage{ngerman}{
          \item Wie viele Runden werden benötigt vom Einbruch des ersten Zuges bis zum verlassen des zweiten Zuges, wenn beide Züge behinderungsfrei fahren sollen und der \emph{schnelle} vor dem \emph{langsamen} Zug fährt?
          \item Wie viele Runden werden benötigt vom Einbruch des ersten Zuges bis zum verlassen des zweiten Zuges, wenn beide Züge behinderungsfrei fahren sollen und der \emph{langsame} vor dem \emph{schnellen} Zug fährt?
        }
      \end{enumerate}

\newpage
\chapter{\IfLanguage{english}{Third Stage}\IfLanguage{ngerman}{Dritte Stufe}}
  \section{\IfLanguage{english}{Route Locking}\IfLanguage{ngerman}{Fahrstraßenverschluss und -festlegung}}
    \setup
      \IfLanguage{english}{TODO}
      \IfLanguage{ngerman}{Die Zugfolge zwischen zwei Bahnhöfen mit Weichen soll betrachtet werden! Dafür wird benötigt:}
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
          \item Two different trains with different vehicle dynamics.
          \item A line with at least two complete blocks.
          \item A station with routes at the beginning and end of the line.
          \item The trains start at the first station and are supposed to run to the second one.
        }
        \IfLanguage{ngerman}{
          \item Infrastruktur wie unten abgebildet mit mindestens \emph{zwei} vollständigen Blöcke
          \item zwei Züge mit verschiedener Fahrdynamik im Bahnhof A
        }
      \end{itemize}
      \begin{center}
        \tikzfigure[0.7\textwidth]{challenge3_setup1.tikz}
      \end{center}
      \IfLanguage{english}{The turnouts may only be passed at \SI{80}{\kilo\metre\per\hour} along the branching track. The speed in the straight track is not limited.}
      \IfLanguage{ngerman}{Die Weichen dürfen im abzweigenden Strang jeweils nur mit \SI{80}{\kilo\metre\per\hour} befahren werden. Im durchgehenden Strang ist die Geschwindigkeit nicht begrenzt.}\\[0.25cm]
    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item\todo{}
          \item Pick a train to leave and explain why not the other one!
          \item How many laps does it take for the second train to depart?
          \item How many laps does it take for both trains (sum of the laps of train 1 and train 2) to arrive at the destination station?
        }
        \IfLanguage{ngerman}{
          \item Ergänze die Infrastruktur mit Vorsignalen, Blocksignalen, Fahrstraßensignalen, Signalzugschlussstellen und Fahrstraßenzugschlussstellen!
          \item Wähle den Zug aus, der als erster abfahren soll und begründe!
          \item Wie viele Runden dauert es bis der zweite Zug abfahren kann?
          \item Wie viele Runden dauert es bis beide Züge (Summe der Runden von Zug 1 und Zug 2) im Zielbahnhof angekommen sind?
        }
      \end{enumerate}

  \newpage

  \section{\IfLanguage{english}{Overlap}\IfLanguage{ngerman}{Durchrutschweg}}
    \setup
      \IfLanguage{english}{TODO!}
      \IfLanguage{ngerman}{In einem Bahnhof sollen sich zwei Züge kreuzen! Dafür wird benötigt:}
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
        }
        \IfLanguage{ngerman}{
          \item Infrastruktur wie unten abgebildet
          \item zwei Züge mit verschiedener Fahrdynamik in Fahrt mit maximaler Geschwindigkeit
          \item Zug 1 fährt ohne Halt durch; Zug 2 hat einen Verkehrshalt von 2 Runden im Bahnhof
        }
      \end{itemize}
      \begin{center}
        \tikzfigure{challenge3_setup2.tikz}
      \end{center}
      \IfLanguage{english}{The turnouts may be passed at \SI{80}{\kilo\metre\per\hour} at the branching track. The overlap requires 2 fields.}
      \IfLanguage{ngerman}{Die Weichen dürfen im abzweigenden Strang mit \SI{80}{\kilo\metre\per\hour} befahren werden. Der Durchrutschweg beträgt 2 Felder.}\\[0.25cm]

    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item\todo{}!
        }
        \IfLanguage{ngerman}{
          \item Ergänze die Infrastruktur mit Vorsignalen, Signalzugschlussstellen und Fahrstraßenzugschlussstellen!
          \item Entscheide begründet welcher Zug auf welches Gleis fahren soll. Welche Probleme können auftreten?
          \item Nach wie viel Runden ist Zug 2 im Bahnhof zum stehen gekommen?
          \item Nach wie viel Runden hat Zug 1 den Bahnhof vollständig verlassen?
          \item Fertige vom Bahnhof einen Verschlussplan an!
        }
      \end{enumerate}

  \newpage

  \section{\IfLanguage{english}{Dual protection points}\IfLanguage{ngerman}{Zwieschutzweiche}}
    \setup
      \IfLanguage{english}{TODO!}
      \IfLanguage{ngerman}{In einem Bahnhof mit Zwieschutzweiche begegenen sich Züge. Dafür wird benötigt:}\\[0.25cm]
      \begin{itemize}
        \IfLanguage{english}{
          \item\todo{}
        }
        \IfLanguage{ngerman}{
          \item Infrastruktur wie unten abgebildet (Rechtsfahrbetrieb)
          \item drei Züge: Zug 1 und 2 stehen; Zug 3 fährt mit maximaler Geschwindigkeit
        }
      \end{itemize}
      \begin{center}
        \tikzfigure{challenge3_setup3.tikz}
      \end{center}
    \task
      \begin{enumerate}[label=\alph*)]
        \IfLanguage{english}{
          \item\todo{}!
        }
        \IfLanguage{ngerman}{
          \item Sichere die Ausfahrstraße für Zug 1!
          \item Sichere die Einfahrstraße für Zug 3!
          \item Sichere die Fahrstraße für Zug 2, nachdem Zug 1 ausgefahren ist. Welches Problem tritt auf? Wie kann es gelöst werden?
        }
      \end{enumerate}
